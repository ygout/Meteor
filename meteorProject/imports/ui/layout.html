<template name="layout1">
  {{> Template.dynamic template=nav}}
  <div class="container">
    {{> Template.dynamic template=main}}
  </div>
</template>

<template name="navigation">
  <nav class="nav-wrapper">
    <a href="#" class="brand-logo">UA Meteor</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
      <li class="{{isActiveRoute name='home'}}"><a href="{{pathFor 'home'}}">Index</a></li>
      {{#unless currentUser}}
      <li class="{{isActiveRoute name='signIn'}}"><a href="{{pathFor 'signIn'}}">S'identifier</a></li>
      {{else}}
      <li class="{{isActiveRoute name='vote'}}"><a href="{{pathFor 'vote'}}">Votes</a></li>
      <li class="{{isActiveRoute name='signOut'}}"><a href="{{pathFor 'signOut'}}">Se d√©connecter</a></li>
      {{/unless}}
    </ul>
  </nav>
</template>

<template name="indexContent">
  <table class='highlight'>
    <thead>
      <tr>
        <th>Name</th>
        <th>Language</th>
        <th>Score</th>
      </tr>
    </thead>
    <tbody>
      {{#each getDevs}}
      <tr>
        <td>{{name}}</td>
        <td>{{language}}</td>
        <td>{{score}}</td>
      </tr>
      {{/each}}
      <tr>
        <td></td>
        <td></td>
        <td>Total : {{getVotesCount}}</td>
      </tr>
    </tbody>
  </table>


</template>

<template name="voteContent">
  {{#if getUserVote}}
    Remaining votes : {{getUserVote}}
  {{/if}}
  <table class='highlight'>
    <thead>
      <tr>
        <th>Name</th>
        <th>Language</th>
        <th>Score</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each getDevs}}
      <tr>
        <td>{{name}}</td>
        <td>{{language}}</td>
        <td>{{score}}</td>
        <td><button class='devId'>Vote</button></td>
      </tr>
      {{/each}}
      <tr>
        <td></td>
        <td></td>
        <td>Total : {{getVotesCount}}</td>
      </tr>
    </tbody>
  </table>

</template>

<template name="notfoundContent">
  <p>Erreur 404</p>
</template>

<template name="commentsContent">
  <h4>Liste des commentaires</h4>
  {{#if subsReady 'getComments'}}
  <ul>
    {{#each getComments}}
      <li><a href="{{pathFor 'comment' comId=_id._str}}">{{title}}</a></li>
    {{/each}}
  </ul>
  {{else}}
  <p>Chargement en cours...</p>
  {{/if}}

</template>

<template name="commentContent">
  {{#if subsReady 'getComment'}}
    {{#if getComment}}
    <h5>{{getComment.title}}</h5>
    <p>{{getComment.content}}</p>
    {{/if}}
  {{else}}
  <p>Chargement en cours...</p>
  {{/if}}
</template>

<template name="authContent">
  <div class="row">
    <div class="col s6 offset-s3">
      {{> atForm}}
    </div>
  </div>
</template>
